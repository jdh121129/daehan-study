<!DOCTYPE html>
<html lang="ko">
<head>
<link rel="icon" href="logo.png.jpg">
<link rel="apple-touch-icon" href="logo.png.jpg">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>ëŒ€í•œ STUDY - ì¹œêµ¬ë“¤ê³¼ í•¨ê»˜</title>
<script src="https://cdn.tailwindcss.com"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<script src="https://www.youtube.com/iframe_api"></script>
<style>
    @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700;900&display=swap');
    body{font-family:'Noto Sans KR',sans-serif;background-color:#f0f7f6;overflow:hidden;margin:0;touch-action:manipulation;-webkit-tap-highlight-color:transparent}.miku-bg{background-color:#39c5bb}.miku-text{color:#39c5bb}.tab-content{animation:fadeIn 0.3s cubic-bezier(0.4,0,0.2,1)}@keyframes fadeIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}#bg-layer{position:fixed;top:0;left:0;width:100%;height:100%;z-index:0;pointer-events:none;transition:background 0.5s ease}@keyframes fall-rotate{0%{transform:translateY(-10vh) rotate(0deg);opacity:1}100%{transform:translateY(110vh) rotate(360deg);opacity:0}}@keyframes fall-straight{0%{transform:translateY(-10vh);opacity:0.7}100%{transform:translateY(110vh);opacity:0.3}}@keyframes fall-sway{0%{transform:translateY(-10vh) translateX(0px);opacity:0.9}50%{transform:translateY(50vh) translateX(20px);opacity:0.8}100%{transform:translateY(110vh) translateX(-20px);opacity:0}}.particle{position:absolute;top:-10%;user-select:none;pointer-events:none}.glass-card{background:rgba(255,255,255,0.9);backdrop-filter:blur(20px);border:1px solid rgba(255,255,255,0.8);box-shadow:0 8px 32px 0 rgba(31,38,135,0.15)}@keyframes flash{0%{background-color:rgba(57,197,187,0.3)}100%{background-color:transparent}}.flash-effect{animation:flash 0.2s ease-out}::-webkit-scrollbar{width:0px;background:transparent}input[type=range]{accent-color:#39c5bb}details>summary{list-style:none;cursor:pointer;transition:0.2s}details>summary::-webkit-details-marker{display:none}details[open]>summary{color:#39c5bb;margin-bottom:10px}select{appearance:none;background-image:url("data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%2339c5bb%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.5-12.8z%22%2F%3E%3C%2Fsvg%3E");background-repeat:no-repeat;background-position:right 1rem top 50%;background-size:0.65rem auto}
</style>
</head>
<body>
<noscript><div style="position:fixed;top:0;left:0;width:100%;height:100%;background:white;z-index:99999;display:flex;justify-content:center;align-items:center;flex-direction:column;text-align:center;"><h1 style="color:#39c5bb;font-family:'Noto Sans KR',sans-serif;font-size:30px;margin-bottom:20px;">ì•—! ìë°”ìŠ¤í¬ë¦½íŠ¸ê°€ êº¼ì ¸ìˆì–´! ğŸµ</h1><p style="color:#555;font-size:18px;">ë¯¸ì¿ ì™€ ê³µë¶€í•˜ë ¤ë©´ ë¸Œë¼ìš°ì € ì„¤ì •ì—ì„œ<br>ìë°”ìŠ¤í¬ë¦½íŠ¸ë¥¼ ê¼­ ì¼œì¤˜! (ï½¡â™¥â€¿â™¥ï½¡)</p></div></noscript>
<div id="bg-layer"></div>
<header class="fixed top-0 left-0 w-full h-12 lg:h-14 flex items-center justify-between px-5 lg:px-8 z-[100] bg-white/80 backdrop-blur-md border-b border-white/50 shadow-sm">
<div id="top-date" class="font-black text-slate-500 text-xs uppercase tracking-wider"></div>
<div class="absolute left-1/2 -translate-x-1/2 text-center"><div id="user-greeting" class="text-[10px] text-slate-400 font-bold uppercase tracking-widest">GUEST</div><div id="top-time" class="miku-text text-xl lg:text-2xl font-black tracking-widest leading-none"></div></div>
<div class="flex gap-2 text-xs font-bold text-slate-400"><button onclick="logout()" class="hover:text-rose-500 transition-colors" title="ë¡œê·¸ì•„ì›ƒ"><i class="fas fa-sign-out-alt"></i></button></div>
</header>
<div id="lock-screen" class="fixed inset-0 miku-bg flex items-center justify-center z-[110] px-4 transition-transform duration-500">
<div class="bg-white/95 backdrop-blur-xl p-8 lg:p-12 rounded-[30px] shadow-2xl w-full max-w-sm text-center relative">
<div id="login-view"><div class="absolute top-4 right-6 text-[10px] font-black text-slate-300">ì œì‘ì: ì¥ëŒ€í•œ</div><button onclick="toggleAuthMode()" class="absolute top-4 left-6 text-xs font-bold text-teal-600 hover:text-teal-800 bg-teal-50 px-3 py-1 rounded-full"><i class="fas fa-user-plus"></i> íšŒì›ê°€ì…</button><h1 class="text-2xl font-black text-slate-800 mb-2 tracking-tighter uppercase mt-6">DAEHAN STUDY</h1><p class="text-rose-500 font-black text-sm mb-6 animate-pulse">ì¹œêµ¬ë“¤ì•„ ì—´ê³µí•˜ì! ğŸ”¥</p><div class="text-left mb-1 ml-1"><span class="text-[10px] font-black text-slate-500 uppercase">ID</span></div><input type="text" id="login-id" class="w-full p-4 bg-slate-100 rounded-2xl mb-4 text-center font-bold outline-none border-2 border-transparent focus:border-teal-400 placeholder-slate-300" placeholder="ì•„ì´ë””"><div class="text-left mb-1 ml-1"><span class="text-[10px] font-black text-slate-500 uppercase">Password</span></div><input type="password" id="login-pw" class="w-full p-4 bg-slate-100 rounded-2xl mb-6 text-center font-bold outline-none border-2 border-transparent focus:border-teal-400 placeholder-slate-300" placeholder="ë¹„ë°€ë²ˆí˜¸"><button onclick="checkLogin()" class="w-full miku-bg text-white py-4 rounded-2xl font-black shadow-lg active:scale-95 transition-transform">ë¡œê·¸ì¸ & ì…ì¥ ğŸš€</button></div>
<div id="register-view" class="hidden"><button onclick="toggleAuthMode()" class="absolute top-4 left-4 text-xs font-bold text-slate-400 hover:text-slate-600"><i class="fas fa-arrow-left"></i> ë’¤ë¡œê°€ê¸°</button><h2 class="text-xl font-black text-slate-800 mb-6 tracking-tighter uppercase mt-4">NEW ACCOUNT</h2><div class="text-left mb-1 ml-1"><span class="text-[10px] font-black text-slate-500 uppercase">New ID</span></div><input type="text" id="reg-id" class="w-full p-3 bg-slate-100 rounded-2xl mb-3 text-center font-bold outline-none border-2 border-transparent focus:border-teal-400 placeholder-slate-300" placeholder="ì‚¬ìš©í•  ì•„ì´ë””"><div class="text-left mb-1 ml-1"><span class="text-[10px] font-black text-slate-500 uppercase">New Password</span></div><input type="password" id="reg-pw" class="w-full p-3 bg-slate-100 rounded-2xl mb-2 text-center font-bold outline-none border-2 border-transparent focus:border-teal-400 placeholder-slate-300" placeholder="ë¹„ë°€ë²ˆí˜¸ ì„¤ì •"><p class="text-[10px] text-rose-500 font-bold mb-6 text-left ml-2">* 5ìë¦¬ ì´ìƒ<br>* ì˜ë¬¸ + íŠ¹ìˆ˜ë¬¸ì(!@#$ ë“±) í•„ìˆ˜</p><button onclick="registerUser()" class="w-full bg-indigo-500 text-white py-4 rounded-2xl font-black shadow-lg active:scale-95 transition-transform">ê³„ì • ë§Œë“¤ê¸° âœ¨</button></div>
</div></div>
<div id="main-app" class="hidden h-screen flex flex-col lg:flex-row pt-12 lg:pt-14 overflow-hidden relative">
<main id="main-content" class="flex-1 p-4 lg:p-8 overflow-y-auto z-10 pb-24 lg:pb-8 scroll-smooth">
<div id="tab-home" class="tab-content max-w-4xl mx-auto space-y-6"><div class="glass-card p-6 lg:p-10 rounded-[30px] text-center shadow-lg relative overflow-hidden"><div id="dday-tag" class="inline-block px-4 py-1.5 rounded-full miku-bg text-white text-[11px] font-black mb-4 uppercase shadow-md tracking-wider"></div><h2 class="text-2xl lg:text-4xl font-black text-slate-800 mb-2" id="home-welcome-msg">ì˜¤ëŠ˜ë„ íŒŒì´íŒ…!</h2><div class="grid grid-cols-2 gap-4 mb-6"><div class="bg-white/60 p-4 rounded-2xl border border-white"><p class="text-[10px] font-black text-slate-400 mb-1 uppercase">Today Problems</p><p class="text-4xl lg:text-5xl font-black miku-text" id="home-total-problems">0</p></div><div class="bg-white/60 p-4 rounded-2xl border border-white"><p class="text-[10px] font-black text-slate-400 mb-1 uppercase">Avg Pace</p><p class="text-4xl lg:text-5xl font-black text-orange-400" id="home-avg-pace">0.0</p></div></div><div class="mb-8"><button onclick="showDailyQuote()" class="bg-slate-100 text-slate-600 px-6 py-3 rounded-xl font-bold text-xs hover:bg-teal-50 hover:text-teal-600 transition-all shadow-sm border border-slate-200">ğŸ“œ ì˜¤ëŠ˜ì˜ ëª…ì–¸ì€?</button><div id="quote-area" class="hidden mt-4 p-4 bg-teal-50 rounded-2xl border border-teal-100 animate-fadeIn"><p id="quote-text" class="text-sm lg:text-base font-black text-slate-700 leading-relaxed"></p></div></div><div class="aspect-video bg-black rounded-[20px] overflow-hidden shadow-2xl relative group"><div id="yt-player" class="absolute inset-0 w-full h-full"></div></div></div></div>
<div id="tab-study" class="tab-content hidden max-w-md mx-auto relative"><div id="study-container" class="glass-card p-6 lg:p-10 rounded-[40px] shadow-2xl text-center border-2 border-white/50"><div class="mb-4"><label class="block text-left text-[10px] font-black text-slate-400 uppercase mb-1 ml-2">SUBJECT</label><select id="subject-select" onchange="changeSubject()" class="w-full p-3 rounded-2xl font-bold text-slate-700 bg-white border-2 border-slate-100 focus:border-teal-400 outline-none text-lg"><option value="êµ­ì–´">ğŸ“š êµ­ì–´</option><option value="ìˆ˜í•™">ğŸ“ ìˆ˜í•™</option><option value="ì˜ì–´">ğŸ”¤ ì˜ì–´</option><option value="ê³¼í•™">ğŸ”¬ ê³¼í•™</option><option value="ì‚¬íšŒ">ğŸŒ ì‚¬íšŒ</option><option value="ì—­ì‚¬">â³ ì—­ì‚¬</option></select></div><div id="tool-box" class="mb-6 bg-slate-50 p-3 rounded-2xl border border-dashed border-slate-300"><div class="flex gap-2"><input type="text" id="tool-input" class="flex-1 p-2 rounded-xl border border-slate-200 text-sm focus:border-teal-400 outline-none" placeholder="ë‹¨ì–´/ê³µì‹ ê²€ìƒ‰"><button onclick="useTool()" class="bg-teal-500 text-white px-4 rounded-xl font-bold text-sm shadow-md hover:bg-teal-600"><i class="fas fa-search"></i></button></div><p id="tool-desc" class="text-[10px] text-slate-400 mt-1 text-left ml-1">êµ­ì–´ì‚¬ì „ì—ì„œ ë‹¨ì–´ë¥¼ ì°¾ì•„ë³´ì„¸ìš”.</p></div><div id="iframe-container" class="hidden mt-4 rounded-2xl overflow-hidden border-2 border-teal-200 shadow-inner bg-white" style="height: 400px;"><div class="bg-teal-100 p-2 flex justify-between items-center text-[10px] font-bold"><span class="miku-text">MIKU SEARCH VIEW</span><button onclick="closeIframe()" class="text-rose-500 hover:text-rose-700"><i class="fas fa-times"></i> ë‹«ê¸°</button></div><iframe id="tool-iframe" src="" class="w-full h-full border-none"></iframe></div><div class="mb-8 relative"><div class="text-xs font-black text-slate-400 uppercase tracking-[0.2em] mb-2">Total Solved</div><div id="total-count-display" class="miku-text text-8xl lg:text-9xl font-black tracking-tighter leading-none">0</div></div><div class="flex justify-between items-center mb-8 bg-white/60 px-6 py-4 rounded-3xl border border-white"><div class="text-left"><p class="text-[10px] font-black text-slate-400 uppercase mb-1">Time</p><div id="timer" class="text-3xl font-black text-slate-700 font-mono">00:00</div></div><div class="h-8 w-px bg-slate-300"></div><div class="text-right"><p class="text-[10px] font-black text-slate-400 uppercase mb-1">Pace</p><p id="live-pace" class="text-3xl font-black miku-text animate-pulse">0.0</p></div></div><div class="grid grid-cols-2 gap-3 mb-6"><div class="bg-teal-50 p-3 rounded-2xl border border-teal-100 flex flex-col items-center justify-center"><span class="text-[10px] font-black text-teal-600 uppercase">Sound ğŸ¤</span><span id="clap-count" class="text-2xl font-black text-teal-700">0</span></div><div class="bg-indigo-50 p-3 rounded-2xl border border-indigo-100 flex flex-col items-center justify-center"><span class="text-[10px] font-black text-indigo-600 uppercase">Click ğŸ–±ï¸</span><span id="manual-count" class="text-2xl font-black text-indigo-700">0</span></div></div><div class="flex gap-2 mb-6"><button onclick="minusAnyCount()" class="w-1/4 py-4 rounded-2xl font-black text-xl bg-slate-200 text-slate-600 shadow-md active:scale-95 transition-all hover:bg-slate-300" title="1ê°œ ì·¨ì†Œ"><i class="fas fa-minus"></i></button><button onclick="addCount('manual', 1)" class="w-3/4 py-4 rounded-2xl font-black text-xl bg-indigo-500 text-white shadow-lg active:scale-95 transition-all hover:bg-indigo-600"><i class="fas fa-plus mr-2"></i> ì§ì ‘ í’€ì—ˆìŒ</button></div><div class="bg-slate-100/50 p-4 rounded-3xl mb-6 border border-white"><div class="flex justify-between text-[10px] font-black text-slate-400 mb-2 uppercase"><span>Mic Sensitivity</span><span id="sens-value" class="text-teal-600">150</span></div><input type="range" id="sens-slider" min="1" max="200" value="150" class="w-full mb-3 cursor-pointer h-2 bg-slate-200 rounded-lg appearance-none"><div class="w-full bg-slate-200 h-2 rounded-full overflow-hidden shadow-inner"><div id="audio-bar" class="h-full miku-bg transition-all duration-75 ease-out" style="width: 0%"></div></div></div><div class="flex gap-3"><button id="start-btn" onclick="startStudy()" class="flex-1 py-4 rounded-2xl font-black text-lg bg-teal-500 text-white shadow-lg active:scale-95 transition-all">ì‹œì‘</button><button id="end-btn" onclick="endStudyAndSave(true)" class="flex-1 py-4 rounded-2xl font-black text-lg bg-rose-500 text-white shadow-lg opacity-40 active:scale-95 transition-all" disabled>ì¢…ë£Œ</button></div></div></div>
<div id="tab-history" class="tab-content hidden max-w-3xl mx-auto"><div class="glass-card p-6 rounded-[30px] mb-6 flex justify-between items-center sticky top-0 z-20"><h3 class="text-xl font-black text-slate-800 uppercase tracking-tighter">History</h3><button onclick="clearAllData()" class="text-xs font-bold text-slate-400 border border-slate-200 px-3 py-2 rounded-full hover:bg-rose-50 hover:text-rose-500 hover:border-rose-200">ì „ì²´ ì´ˆê¸°í™”</button></div><div id="history-list" class="space-y-4 pb-10"></div></div>
<div id="tab-settings" class="tab-content hidden max-w-md mx-auto"><div class="glass-card p-8 rounded-[40px] shadow-lg space-y-8"><h3 class="text-2xl font-black text-slate-800 uppercase border-b pb-4">Settings</h3><div class="space-y-6"><div><div class="flex justify-between items-center mb-2"><span class="font-bold text-slate-600 text-sm">ë°°ê²½ìŒì•… ë³¼ë¥¨</span><span id="bgm-vol-value" class="miku-text font-black text-sm">30%</span></div><input type="range" id="bgm-volume-slider" min="0" max="100" value="30" class="w-full cursor-pointer h-2 bg-slate-200 rounded-lg appearance-none"></div><div class="p-4 bg-slate-100 rounded-xl text-center"><p class="text-xs text-slate-500 font-bold mb-2">í˜„ì¬ ë¡œê·¸ì¸ ID</p><p class="text-xl font-black miku-text" id="setting-username">-</p></div><div class="border-t pt-4"><h4 class="text-sm font-black text-slate-600 mb-4 uppercase">ì•± ì‚¬ìš© ê°€ì´ë“œ</h4><details class="mb-2 bg-slate-50 p-3 rounded-xl"><summary class="font-bold text-xs text-slate-700 flex justify-between items-center"><span>ğŸ  í™ˆ (Home)</span> <i class="fas fa-chevron-down text-[10px]"></i></summary><p class="text-[11px] text-slate-500 mt-2 leading-relaxed">- ì˜¤ëŠ˜ì˜ ê³µë¶€ëŸ‰ê³¼ í‰ê·  ì†ë„ í™•ì¸<br>- D-Day ì¹´ìš´íŠ¸ ë° ì˜¤ëŠ˜ì˜ ëª…ì–¸</p></details><details class="mb-2 bg-slate-50 p-3 rounded-xl"><summary class="font-bold text-xs text-slate-700 flex justify-between items-center"><span>âš¡ ì—´ê³µ (Study)</span> <i class="fas fa-chevron-down text-[10px]"></i></summary><div class="text-[11px] text-slate-500 mt-2 leading-relaxed space-y-1"><p>- <strong>ê³¼ëª© ì„ íƒ:</strong> ê³¼ëª©ë³„ ë„êµ¬í•¨ ìë™ ë³€ê²½</p><p>- <strong>Pace (ì†ë„):</strong> 1ë¶„ë‹¹ í‘¸ëŠ” ë¬¸ì œ ìˆ˜.<br>&nbsp;&nbsp;(ìˆ«ìê°€ ë†’ì„ìˆ˜ë¡ ë¹¨ë¦¬ í‘¸ëŠ” ê²ƒ)</p><p>- <strong>[ì‹œì‘]</strong> ë²„íŠ¼ì„ ëˆŒëŸ¬ì•¼ ê¸°ë¡ ì‹œì‘</p></div></details><details class="mb-2 bg-slate-50 p-3 rounded-xl"><summary class="font-bold text-xs text-slate-700 flex justify-between items-center"><span>ğŸ“Š ê¸°ë¡ (History)</span> <i class="fas fa-chevron-down text-[10px]"></i></summary><p class="text-[11px] text-slate-500 mt-2 leading-relaxed">- ë‚ ì§œë³„ ê³µë¶€ ì‹œê°„/ë¬¸ì œ ìˆ˜ ì €ì¥<br>- ì“°ë ˆê¸°í†µ(ğŸ—‘ï¸) ì•„ì´ì½˜ìœ¼ë¡œ ê°œë³„ ì‚­ì œ ê°€ëŠ¥</p></details></div></div></div></div>
</main>
<aside class="fixed bottom-0 left-0 w-full h-16 bg-white/90 backdrop-blur-xl border-t border-slate-200 z-50 lg:relative lg:w-64 lg:h-auto lg:border-t-0 lg:border-r lg:bg-white/60">
<nav class="h-full flex lg:flex-col justify-around lg:justify-start lg:p-6 lg:space-y-4"><button onclick="showTab('home')" class="nav-btn flex-1 lg:flex-none flex flex-col lg:flex-row items-center justify-center lg:justify-start gap-1 lg:gap-4 p-1 lg:p-4 rounded-2xl transition-all miku-text" id="nav-home"><i class="fas fa-home text-lg lg:text-xl mb-1 lg:mb-0"></i><span class="text-[10px] lg:text-base font-bold">í™ˆ</span></button><button onclick="showTab('study')" class="nav-btn flex-1 lg:flex-none flex flex-col lg:flex-row items-center justify-center lg:justify-start gap-1 lg:gap-4 p-1 lg:p-4 rounded-2xl transition-all text-slate-400" id="nav-study"><i class="fas fa-bolt text-lg lg:text-xl mb-1 lg:mb-0"></i><span class="text-[10px] lg:text-base font-bold">ì—´ê³µ</span></button><button onclick="showTab('history')" class="nav-btn flex-1 lg:flex-none flex flex-col lg:flex-row items-center justify-center lg:justify-start gap-1 lg:gap-4 p-1 lg:p-4 rounded-2xl transition-all text-slate-400" id="nav-history"><i class="fas fa-chart-bar text-lg lg:text-xl mb-1 lg:mb-0"></i><span class="text-[10px] lg:text-base font-bold">ê¸°ë¡</span></button><button onclick="showTab('settings')" class="nav-btn flex-1 lg:flex-none flex flex-col lg:flex-row items-center justify-center lg:justify-start gap-1 lg:gap-4 p-1 lg:p-4 rounded-2xl transition-all text-slate-400" id="nav-settings"><i class="fas fa-cog text-lg lg:text-xl mb-1 lg:mb-0"></i><span class="text-[10px] lg:text-base font-bold">ì„¤ì •</span></button></nav>
</aside>
</div>
<script>
let player,studyLogData=[],currentUser="",storageKey="",stats={time:0,clapProblems:0,manualProblems:0,startTimeStr:""},currentSubject="êµ­ì–´",isStudying=!1,timerInterval=null,sensitivity=150,lastDetectionTime=0,wakeLock=null,audioContext=null,analyser=null,dataArray=null,currentDayStr="";const quotes=["ê°€ì¥ ëŠ¦ì—ˆë‹¤ê³  ìƒê°í•  ë•Œê°€ ê°€ì¥ ë¹ ë¥¸ ë•Œë‹¤.","ê³ í†µì€ ì ê¹ì´ì§€ë§Œ í¬ê¸°ëŠ” í‰ìƒì´ë‹¤.","ì˜¤ëŠ˜ ê±·ì§€ ì•Šìœ¼ë©´ ë‚´ì¼ì€ ë›°ì–´ì•¼ í•œë‹¤.","ë„ˆì˜ ë¯¸ë˜ëŠ” ì§€ê¸ˆ ë„¤ê°€ ë¬´ì—‡ì„ í•˜ê³  ìˆëŠ”ì§€ì— ë‹¬ë ¤ ìˆë‹¤.","ê¿ˆì„ ê¾¸ê¸°ì— ëŠ¦ì€ ë‚˜ì´ëŠ” ì—†ë‹¤.","ë…¸ë ¥ì€ ë°°ì‹ í•˜ì§€ ì•ŠëŠ”ë‹¤.","ì²œì¬ëŠ” 1%ì˜ ì˜ê°ê³¼ 99%ì˜ ë•€ìœ¼ë¡œ ë§Œë“¤ì–´ì§„ë‹¤.","ì‹œì‘ì´ ë°˜ì´ë‹¤."];
function toggleAuthMode(){const e=document.getElementById("login-view"),t=document.getElementById("register-view");e.classList.contains("hidden")?(e.classList.remove("hidden"),t.classList.add("hidden")):(e.classList.add("hidden"),t.classList.remove("hidden"),document.getElementById("reg-id").value="",document.getElementById("reg-pw").value="")}function registerUser(){const e=document.getElementById("reg-id").value.trim(),t=document.getElementById("reg-pw").value.trim();if(!e)return alert("\uC544\uC774\uB514\uB97C \uC785\uB825\uD574\uC918!");if(!/^(?=.*[a-zA-Z])(?=.*[\W_]).{5,}$/.test(t))return alert("\uBE44\uBC00\uBC88\uD638\uB294 5\uC790\uB9AC \uC774\uC0C1\uC774\uC5B4\uC57C \uD558\uACE0,\n\uC601\uBB38\uACFC \uD2B9\uC218\uAE30\uD638\uB97C \uD558\uB098\uC529\uC740 \uAF2D \uD3EC\uD568\uD574\uC57C \uD574!");let n=JSON.parse(localStorage.getItem("daehan_study_users")||"{}");if(n[e])return alert("\uC774 \uC544\uC774\uB514\uB294 \uC774\uBBF8 \uC788\uB294 \uC544\uC774\uB514\uC785\uB2C8\uB2E4.\n\uB2E4\uB978 \uC544\uC774\uB514\uB97C \uC368\uBCFC\uB798?");n[e]=t,localStorage.setItem("daehan_study_users",JSON.stringify(n)),alert(`\uD658\uC601\uD574, ${e}! \n\uC774\uC81C \uB85C\uADF8\uC778 \uD654\uBA74\uC5D0\uC11C \uC785\uC7A5\uD574\uC918!`),toggleAuthMode()}
function checkLogin(){const e=document.getElementById("login-id").value.trim(),t=document.getElementById("login-pw").value.trim();if(!e)return alert("\uC544\uC774\uB514\uB97C \uC785\uB825\uD574\uC918!");let n=JSON.parse(localStorage.getItem("daehan_study_users")||"{}");if(n[e]&&n[e]===t){currentUser=e,storageKey=`studyHistory_${e}`;const a=localStorage.getItem(storageKey);try{studyLogData=a?JSON.parse(a):[],Array.isArray(studyLogData)||(studyLogData=[])}catch(e){studyLogData=[]}document.getElementById("user-greeting").innerText=`${currentUser}\uB2D8`,document.getElementById("setting-username").innerText=currentUser,document.getElementById("home-welcome-msg").innerText=`${currentUser}, \uD654\uC774\uD305!`,document.getElementById("lock-screen").style.transform="translateY(-100%)",setTimeout(()=>{document.getElementById("lock-screen").classList.add("hidden"),document.getElementById("main-app").classList.remove("hidden"),document.getElementById("main-app").classList.add("flex")},500),player&&player.playVideo&&player.playVideo(),setTimeout(()=>player.unMute(),500),initBackground(),updateTopBar(),renderHistory(),checkTempSession(),changeSubject(),document.body.addEventListener("touchstart",()=>{audioContext&&"suspended"===audioContext.state&&audioContext.resume()},{once:!0})}else alert("\uC544\uC774\uB514\uAC00 \uC5C6\uAC70\uB098 \uBE44\uBC00\uBC88\uD638\uAC00 \uD2C0\uB838\uC5B4!\n\uB2E4\uC2DC \uD655\uC778\uD574\uBCFC\uB798?")}
function showDailyQuote(){const e=(new Date).getDate()%quotes.length,t=document.getElementById("quote-text");document.getElementById("quote-area").classList.remove("hidden"),t.innerText=quotes[e]}function onYouTubeIframeAPIReady(){player=new YT.Player("yt-player",{height:"100%",width:"100%",videoId:"5qap5aO4i9A",playerVars:{autoplay:1,controls:0,loop:1,playlist:"5qap5aO4i9A",mute:1},events:{onReady:onPlayerReady}})}function onPlayerReady(e){e.target.setVolume(30)}document.getElementById("bgm-volume-slider").addEventListener("input",function(e){const t=e.target.value;document.getElementById("bgm-vol-value").innerText=t+"%",player&&player.setVolume&&player.setVolume(t)});
function showTab(e){document.querySelectorAll(".tab-content").forEach(e=>e.classList.add("hidden")),document.getElementById("tab-"+e).classList.remove("hidden"),document.querySelectorAll(".nav-btn").forEach(e=>{e.classList.remove("miku-text","text-teal-600"),e.classList.add("text-slate-400")});const t=document.getElementById("nav-"+e);t.classList.remove("text-slate-400"),t.classList.add("miku-text")}
function updateTopBar(){const e=new Date,t=["SUN","MON","TUE","WED","THU","FRI","SAT"];document.getElementById("top-date").innerText=`${e.getFullYear()}.${String(e.getMonth()+1).padStart(2,"0")}.${String(e.getDate()).padStart(2,"0")} ${t[e.getDay()]}`,document.getElementById("top-time").innerText=e.toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit"});const n=Math.ceil((new Date("2025-11-13T00:00:00")-e)/864e5),a=document.getElementById("dday-tag");a.innerText=n>0?`D-${n} \uC218\uB2A5 \uB300\uBC15 \uAE30\uC6D0`:0===n?"D-DAY \uD654\uC774\uD305!":"\uC218\uACE0\uD588\uC5B4, \uB108\uC758 \uAFC8\uC744 \uC751\uC6D0\uD574!"}
function changeSubject(){const e={êµ­ì–´:{tool:"https://ko.dict.naver.com/",desc:"\uAD6D\uC5B4\uC0AC\uC804\uC5D0\uC11C \uB2E8\uC5B4\uB97C \uCC3E\uC544\uBCF4\uC138\uC694.",icon:"ğŸ“š"},ìˆ˜í•™:{tool:"https://www.geogebra.org/calculator",desc:"\uADF8\uB798\uD504 \uACC4\uC0B0\uAE30\uB97C \uD65C\uC6A9\uD558\uC138\uC694.",icon:"ğŸ“"},ì˜ì–´:{tool:"https://en.dict.naver.com/",desc:"\uC601\uC5B4\uC0AC\uC804\uC5D0\uC11C \uB2E8\uC5B4\uB97C \uCC3E\uC544\uBCF4\uC138\uC694.",icon:"ğŸ”¤"},ê³¼í•™:{tool:"https://phet.colorado.edu/ko/",desc:"\uAC00\uC0C1 \uC2E4\uD5D8\uC2E4\uC744 \uC774\uC6A9\uD574\uBCF4\uC138\uC694.",icon:"ğŸ”¬"},ì‚¬íšŒ:{tool:"https://map.naver.com/",desc:"\uC9C0\uB3C4\uB85C \uC704\uCE58\uB97C \uD655\uC778\uD574\uBCF4\uC138\uC694.",icon:"ğŸŒ"},ì—­ì‚¬:{tool:"https://encykorea.aks.ac.kr/",desc:"\uBBFC\uC871\uBB38\uD654\uB300\uBC31\uACFC\uC0AC\uC804\uC744 \uCC38\uACE0\uD558\uC138\uC694.",icon:"â³"}};currentSubject=document.getElementById("subject-select").value;const t=e[currentSubject];document.getElementById("tool-desc").innerText=t.desc,document.getElementById("tool-input").placeholder=`${t.icon} ${currentSubject} \uAD00\uB828 \uAC80\uC0C9`}
function useTool(){const e=document.getElementById("tool-input").value,t=document.getElementById("tool-iframe");document.getElementById("iframe-container").classList.remove("hidden"),t.src=e?"ìˆ˜í•™"===currentSubject?"https://www.geogebra.org/calculator":"ê³¼í•™"===currentSubject?`https://www.google.com/search?igu=1&q=${e}`:`https://search.naver.com/search.naver?query=${e}`:{"êµ­ì–´":"https://ko.dict.naver.com/","ìˆ˜í•™":"https://www.geogebra.org/calculator","ì˜ì–´":"https://en.dict.naver.com/","ê³¼í•™":"https://phet.colorado.edu/ko/","ì‚¬íšŒ":"https://map.naver.com/","ì—­ì‚¬":"https://encykorea.aks.ac.kr/"}[currentSubject]}function closeIframe(){document.getElementById("iframe-container").classList.add("hidden")}document.getElementById("sens-slider").addEventListener("input",function(e){sensitivity=201-e.target.value,document.getElementById("sens-value").innerText=e.target.value});
function startStudy(){currentUser?(isStudying||(isStudying=!0,stats={time:0,clapProblems:0,manualProblems:0,startTimeStr:(new Date).toLocaleTimeString()},document.getElementById("start-btn").disabled=!0,document.getElementById("start-btn").classList.add("opacity-40"),document.getElementById("end-btn").disabled=!1,document.getElementById("end-btn").classList.remove("opacity-40"),document.getElementById("subject-select").disabled=!0,"wakeLock"in navigator&&navigator.wakeLock.request("screen").then(e=>{wakeLock=e}),navigator.mediaDevices.getUserMedia({audio:!0}).then(e=>{audioContext=new(window.AudioContext||window.webkitAudioContext),analyser=audioContext.createAnalyser();const t=audioContext.createMediaStreamSource(e);t.connect(analyser),analyser.fftSize=256,dataArray=new Uint8Array(analyser.frequencyBinCount),detectSound()}).catch(e=>{console.log("\uB9C8\uC774\uD06C \uAD8C\uD55C \uC5C6\uC74C"),alert("\uB9C8\uC774\uD06C\uB97C \uCF1C\uC57C \uBC15\uC218 \uC18C\uB9AC\uB97C \uB4E4\uC744 \uC218 \uC788\uC5B4! ğŸ¤")}),timerInterval=setInterval(()=>{stats.time++,updateTimerDisplay()},1e3))):alert("\uB85C\uADF8\uC778\uC774 \uD544\uC694\uD574!")}
function detectSound(){if(!isStudying)return;requestAnimationFrame(detectSound),analyser.getByteFrequencyData(dataArray);let e=0;for(let t=0;t<dataArray.length;t++)e+=dataArray[t];let t=e/dataArray.length;const n=Math.min(100,t/50*100);document.getElementById("audio-bar").style.width=n+"%";const a=Date.now();t>sensitivity/3&&a-lastDetectionTime>800&&(addCount("clap",1),lastDetectionTime=a,(e=document.createElement("div")).className="fixed inset-0 bg-teal-200/30 z-[200] pointer-events-none flash-effect",document.body.appendChild(e),setTimeout(()=>e.remove(),200));var e}function addCount(e,t){!isStudying&&t>0?alert("\uBA3C\uC800 [\uC2DC\uC791] \uBC84\uD2BC\uC744 \uB20C\uB7EC\uC918!"):("clap"===e?stats.clapProblems+=t:stats.manualProblems+=t,updateDisplay())}function minusAnyCount(){stats.manualProblems>0?stats.manualProblems--:stats.clapProblems>0&&stats.clapProblems--,updateDisplay()}
function updateDisplay(){const e=stats.clapProblems+stats.manualProblems;document.getElementById("total-count-display").innerText=e,document.getElementById("clap-count").innerText=stats.clapProblems,document.getElementById("manual-count").innerText=stats.manualProblems;const t=stats.time/60,n=t>0?(e/t).toFixed(1):"0.0";document.getElementById("live-pace").innerText=n}function updateTimerDisplay(){const e=Math.floor(stats.time/60),t=stats.time%60;document.getElementById("timer").innerText=`${String(e).padStart(2,"0")}:${String(t).padStart(2,"0")}`}
function endStudyAndSave(e){isStudying=!1,clearInterval(timerInterval),wakeLock&&wakeLock.release(),audioContext&&audioContext.close(),document.getElementById("start-btn").disabled=!1,document.getElementById("start-btn").classList.remove("opacity-40"),document.getElementById("end-btn").disabled=!0,document.getElementById("end-btn").classList.add("opacity-40"),document.getElementById("subject-select").disabled=!1;if(e&&(stats.clapProblems+stats.manualProblems>0||stats.time>0)){const t=stats.clapProblems+stats.manualProblems,n=new Date,a={date:`${n.getMonth()+1}/${n.getDate()}`,subject:currentSubject,time:stats.time,count:t,pace:stats.time>0?(t/(stats.time/60)).toFixed(1):0};JSON.parse(localStorage.getItem("temp_study_session"))&&localStorage.removeItem("temp_study_session"),studyLogData.unshift(a),studyLogData.length>50&&studyLogData.pop(),localStorage.setItem(storageKey,JSON.stringify(studyLogData)),renderHistory(),alert(`\uC218\uACE0\uD588\uC5B4! ${t}\uBB38\uC81C \uD480\uC5C8\uACE0, ${Math.floor(stats.time/60)}\uBD84 \uC9D1\uC911\uD588\uB124! ğŸ‘`)}stats={time:0,clapProblems:0,manualProblems:0,startTimeStr:""},updateDisplay(),updateTimerDisplay()}
setInterval(()=>{if(isStudying){localStorage.setItem("temp_study_session",JSON.stringify({stats:stats,subject:currentSubject,user:currentUser,timestamp:Date.now()}))}},1e4);function checkTempSession(){const e=JSON.parse(localStorage.getItem("temp_study_session"));e&&e.user===currentUser&&Date.now()-e.timestamp<3e5&&(confirm("\uBC29\uAE08 \uACF5\uBD80\uD558\uB358 \uAE30\uB85D\uC774 \uB0A8\uC544\uC788\uC5B4! \uC774\uC5B4\uD560\uB798?")?(stats=e.stats,currentSubject=e.subject,document.getElementById("subject-select").value=currentSubject,changeSubject(),startStudy()):localStorage.removeItem("temp_study_session"))}
function renderHistory(){const e=document.getElementById("history-list");e.innerHTML="";let t=0,n=0;studyLogData.forEach((a,l)=>{t+=a.count,n+=a.time;const s=Math.floor(a.time/60),o=document.createElement("div");o.className="bg-white p-4 rounded-2xl shadow-sm border border-slate-100 flex justify-between items-center",o.innerHTML=`<div class="flex items-center gap-3"><div class="bg-teal-100 text-teal-600 font-black text-xs px-2 py-1 rounded-lg">${a.date}</div><div><div class="text-sm font-bold text-slate-700">${a.subject} <span class="text-slate-400 text-xs">| ${s}\uBD84</span></div><div class="text-xs text-slate-400">\uC18D\uB3C4: ${a.pace}/\uBD84</div></div></div><div class="flex items-center gap-3"><span class="text-xl font-black miku-text">${a.count}\uBB38\uC81C</span><button onclick="deleteLog(${l})" class="text-slate-300 hover:text-rose-500"><i class="fas fa-trash"></i></button></div>`,e.appendChild(o)}),document.getElementById("home-total-problems").innerText=t,document.getElementById("home-avg-pace").innerText=n>0?(t/(n/60)).toFixed(1):"0.0"}function deleteLog(e){confirm("\uC815\uB9D0 \uC774 \uAE30\uB85D\uC744 \uC9C0\uC6B8 \uAC70\uC57C?")&&(studyLogData.splice(e,1),localStorage.setItem(storageKey,JSON.stringify(studyLogData)),renderHistory())}function clearAllData(){confirm("\uBAA8\uB4E0 \uAE30\uB85D\uC744 \uCD08\uAE30\uD654\uD560\uAE4C? (\uB418\uB3CC\uB9B4 \uC218 \uC5C6\uC5B4!)")&&(studyLogData=[],localStorage.setItem(storageKey,JSON.stringify(studyLogData)),renderHistory())}
function logout(){confirm("\uB85C\uADF8\uC544\uC6C3 \uD560 \uAC70\uC57C?")&&(isStudying&&endStudyAndSave(!1),currentUser="",document.getElementById("main-app").classList.remove("flex"),document.getElementById("main-app").classList.add("hidden"),document.getElementById("lock-screen").classList.remove("hidden"),document.getElementById("lock-screen").style.transform="translateY(0)",document.getElementById("login-pw").value="",player&&player.stopVideo&&player.stopVideo())}
function initBackground(){const e=document.getElementById("bg-layer");e.innerHTML="";const t=(new Date).getMonth()+1;let n="â„ï¸",a="fall-sway",l=15,s=[15,30];t>=3&&t<=5?(n="ğŸŒ¸",a="fall-rotate"):t>=6&&t<=8?(n="ğŸ’§",a="fall-straight",l=20,s=[10,20]):t>=9&&t<=11&&(n="ğŸ",a="fall-rotate");for(let t=0;t<l;t++){const t=document.createElement("div");t.className="particle",t.innerText=n,t.style.left=100*Math.random()+"vw",t.style.fontSize=Math.random()*(s[1]-s[0])+s[0]+"px";const l=5*Math.random()+5;t.style.animation=`${a} ${l}s linear infinite`,t.style.animationDelay=5*Math.random()+"s",e.appendChild(t)}}
window.addEventListener("keydown",e=>{if("Space"===e.code&&isStudying){e.preventDefault();addCount("manual",1)}});setInterval(updateTopBar,1e3);updateTopBar();
document.addEventListener("keydown",function(e){if("F12"===e.key||123===e.keyCode)return e.preventDefault(),e.returnValue=!1,alert("\uC557! \uAC1C\uBC1C\uC790 \uB3C4\uAD6C\uB294 \uC5F4 \uC218 \uC5C6\uC5B4! \u266B"),!1;if(e.ctrlKey&&(e.shiftKey&&["I","J","C"].includes(e.key.toUpperCase())||"U"===e.key.toUpperCase()))return e.preventDefault(),e.returnValue=!1,alert("\uC18C\uC2A4 \uCF54\uB4DC\uB294 \uBE44\uBC00\uC774\uC57C! \uC5D0\uD5E4\uD5E4 \u2728"),!1});document.addEventListener("contextmenu",function(e){e.preventDefault()});
</script>
</body>
</html>
